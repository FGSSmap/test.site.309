:root{--primary-color:#19b78f;--secondary-color:#bbdbf3;--accent-color:#ffb6c1;--purple-accent:#d6adff;--yellow-accent:#fff799;--success-color:#19b78f;--surface-color:#ffffff;--surface-secondary:#fefefe;--surface-soft:rgba(255,182,193,0.08);--border-color:rgba(25,183,143,0.2);--border-soft:rgba(187,219,243,0.4);--text-primary:#2d3748;--text-secondary:#4a5568;--text-muted:#718096;--shadow-sm:0 1px 3px 0 rgba(25,183,143,0.1),0 1px 2px 0 rgba(25,183,143,0.06);--shadow-md:0 4px 6px -1px rgba(25,183,143,0.1),0 2px 4px -2px rgba(25,183,143,0.06);--shadow-lg:0 10px 15px -3px rgba(25,183,143,0.1),0 4px 6px -4px rgba(25,183,143,0.06);--shadow-colored:0 8px 25px -5px rgba(255,182,193,0.3);--gradient-primary:linear-gradient(135deg,#19b78f 0%,#bbdbf3 50%,#d6adff 100%);--gradient-soft:linear-gradient(135deg,rgba(255,182,193,0.1) 0%,rgba(187,219,243,0.1) 100%);--gradient-header:linear-gradient(135deg,#ffb6c1 0%,#19b78f 30%,#bbdbf3 60%,#d6adff 80%,#fff799 100%);--radius:1rem;--transition:all 0.3s cubic-bezier(0.4,0,0.2,1);--map-height:500px;--map-height-mobile:350px;--z-base:0;--z-map:10;--z-overlay:50;--z-modal:2000;--z-notification:1001}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Noto Sans JP','Inter',-apple-system,BlinkMacSystemFont,sans-serif;line-height:1.6;color:var(--text-primary);background:var(--gradient-soft);min-height:100vh}.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.header{background:var(--gradient-header);box-shadow:var(--shadow-colored);padding:3rem 1rem;text-align:center;position:relative;overflow:hidden}.header::before{content:'';position:absolute;inset:0;background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);pointer-events:none}.logo-title{max-width:900px;margin:0 auto;position:relative;z-index:2}.logo{width:100px;height:100px;border-radius:50%;box-shadow:var(--shadow-colored);margin-bottom:1.5rem;transition:var(--transition);border:4px solid rgba(255,255,255,0.8);background:var(--surface-color)}.logo:hover{transform:scale(1.1) rotate(5deg);box-shadow:0 15px 35px rgba(255,182,193,0.4)}.title1{font-size:clamp(2.5rem,6vw,4rem);font-weight:700;margin-bottom:1.5rem;text-shadow:2px 2px 8px rgba(255,255,255,0.8),0 0 20px rgba(255,182,193,0.6);letter-spacing:.05em}.subtitle{font-size:1.2rem;color:var(--text-primary);max-width:800px;margin:0 auto;line-height:1.8;background:rgba(255,255,255,0.7);padding:1.5rem 2rem;border-radius:var(--radius);box-shadow:var(--shadow-sm);backdrop-filter:blur(5px)}
.map-buttons{display:flex;justify-content:center;gap:1rem;padding:2rem 1rem 1rem;flex-wrap:wrap}.map-btn{display:flex;align-items:center;gap:.5rem;padding:1.2rem 2.5rem;background:rgba(255,255,255,0.9);border:2px solid var(--border-color);border-radius:var(--radius);font-size:1.1rem;font-weight:600;color:var(--text-primary);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-sm);min-width:180px;font-family:inherit;backdrop-filter:blur(10px)}.map-btn:hover{background:rgba(255,182,193,0.2);border-color:var(--accent-color);transform:translateY(-3px);box-shadow:var(--shadow-colored)}.map-btn.active{background:var(--gradient-primary);border-color:var(--primary-color);color:#fff;transform:translateY(-3px);box-shadow:var(--shadow-colored)}.map-btn i{font-size:1.2rem}
.back-button-container{width:100%;padding:1rem;display:flex;justify-content:center;background:rgba(255,255,255,0.8);backdrop-filter:blur(10px);border-bottom:1px solid rgba(25,183,143,0.2)}.back-button-standalone{display:flex;align-items:center;gap:.5rem;padding:.8rem 1.5rem;background:linear-gradient(135deg,var(--primary-color),#1e8b5f);border:none;border-radius:.75rem;font-size:1rem;font-weight:600;color:#fff;cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-md);font-family:inherit}.back-button{position:absolute;top:1rem;left:1rem;z-index:9999;display:flex;align-items:center;gap:.5rem;padding:.8rem 1.2rem;background:rgba(255,255,255,0.95);border:2px solid var(--primary-color);border-radius:.5rem;font-size:.95rem;font-weight:600;color:var(--primary-color);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-md);font-family:inherit;backdrop-filter:blur(10px)}.back-button-standalone:hover{background:linear-gradient(135deg,#1e8b5f,var(--primary-color));transform:translateY(-2px);box-shadow:0 8px 25px rgba(25,183,143,0.3)}.back-button:hover{background:var(--primary-color);color:#fff;transform:translateX(-3px);box-shadow:var(--shadow-lg)}.back-button:active{transform:translateX(-1px)}.back-button i{font-size:1rem}
.map-area{max-width:1200px;margin:0 auto;padding:1rem}.map-container{position:relative;display:block;height:0;max-height:0;overflow:hidden;opacity:0;visibility:hidden;transition:max-height .45s ease,opacity .35s}.map-container.active{max-height:var(--map-height);height:var(--map-height);opacity:1;visibility:visible;border-radius:var(--radius);box-shadow:var(--shadow-lg);background:var(--surface-color)}.map-container iframe{width:100%;height:100%;border:none}
#japan-map svg{width:100%;height:100%;background:var(--surface-color)}.placemarks{max-width:1200px;margin:2rem auto 0;padding:0 1rem;display:none}.placemarks.show{display:block}.placemarks-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1.5rem;margin-top:1rem}
.placemark-card{background:rgba(255,255,255,0.95);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow-md);transition:var(--transition);border:2px solid var(--border-soft);backdrop-filter:blur(10px);display:flex;flex-direction:column}.placemark-card:hover{transform:translateY(-6px);box-shadow:var(--shadow-colored);border-color:var(--accent-color)}.placemark-header{position:relative;height:220px;overflow:hidden;background:var(--gradient-primary)}.placemark-image{width:100%;height:100%;object-fit:cover;transition:var(--transition)}.placemark-card:hover .placemark-image{transform:scale(1.05)}.placemark-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 0%,rgba(25,183,143,0.8) 100%);display:flex;align-items:flex-end;padding:1.5rem}.placemark-title{color:#fff;font-size:1.2rem;font-weight:600;text-shadow:1px 1px 3px rgba(0,0,0,.5)}.placemark-content{padding:1.5rem;flex:1 1 auto}.placemark-description{color:var(--text-secondary);margin-bottom:1rem;line-height:1.6}.placemark-actions{display:flex;gap:.75rem;flex-wrap:wrap}.placemark-btn{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;border-radius:calc(var(--radius)*0.7);font-size:.9rem;font-weight:500;text-decoration:none;transition:var(--transition);border:none;cursor:pointer;font-family:inherit}.placemark-btn.primary{background:var(--primary-color);color:#fff}.placemark-btn.primary:hover{background:linear-gradient(135deg,var(--primary-color),var(--secondary-color));transform:translateY(-2px);box-shadow:var(--shadow-md)}.placemark-btn.secondary{background:rgba(255,182,193,0.1);color:var(--text-primary);border:1px solid var(--border-soft)}.placemark-btn.secondary:hover{background:rgba(187,219,243,0.2);border-color:var(--secondary-color);transform:translateY(-1px)}.coordinates{display:inline-flex;align-items:center;gap:.5rem;font-size:.9rem;color:var(--primary-color);background:rgba(25,183,143,0.1);padding:.5rem 1rem;border-radius:calc(var(--radius)*0.7);margin-top:.75rem;border:1px solid var(--border-color)}
.loading{display:none;position:fixed;inset:0;background:rgba(255,255,255,0.9);z-index:9999;align-items:center;justify-content:center}.loading.show{display:flex}.loading-spinner{text-align:center;color:var(--primary-color)}.loading-spinner i{font-size:3rem;animation:pulse 2s infinite}.loading-spinner p{margin-top:1rem;font-size:1.1rem;font-weight:500}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes slideIn{from{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}
.prefecture:hover,.prefecture:focus-visible{fill:var(--yellow-accent)!important;cursor:pointer;stroke-width:2!important;stroke:var(--accent-color)!important;transform:scale(1.012);transition:fill .18s ease,stroke .18s ease,transform .18s ease}
:root{--focus-ring-color:rgba(25,183,143,0.15)}.placemark-card:focus-within,.placemark-card:focus{box-shadow:0 6px 18px rgba(25,183,143,0.15);border-color:rgba(25,183,143,0.25)}.placemark-btn:focus,.map-btn:focus,.back-button:focus,.back-button-standalone:focus{outline:none;box-shadow:0 0 0 4px var(--focus-ring-color);transform:translateY(-1px)}
/* map display transition (compact) */
.map-container{border-radius:var(--radius)}@media (max-width:768px){.header{padding:1.5rem 1rem}.logo{width:60px;height:60px}.title1{font-size:2rem}.subtitle{font-size:1rem}.map-buttons{padding:1rem;gap:.5rem}.map-btn{min-width:120px;padding:.75rem 1rem;font-size:1rem}.map-container.active{max-height:var(--map-height-mobile);height:var(--map-height-mobile)}.placemarks-grid{grid-template-columns:1fr;gap:1rem}.placemark-header{height:150px}.placemark-actions{flex-direction:column}.region-selector{flex-direction:column;gap:.5rem}#region-select{min-width:180px}.placemark-content{padding:1rem}.zoom-reset-btn{padding:.5rem .75rem;font-size:.8rem;top:.5rem;left:.5rem}.zoom-reset-btn span{display:none}.zoom-notification{top:1rem;right:1rem;left:1rem;text-align:center;transform:translateX(110%)}.zoom-notification.show{transform:translateX(0)}.zoom-notification::before{display:none}}
@media (max-width:480px){#region-select{min-width:180px}.placemark-content{padding:1rem}}
/* zoom/reset/notification */
.zoom-reset-btn{position:absolute;top:1rem;left:1rem;z-index:var(--z-map);display:flex;align-items:center;gap:.75rem;padding:1rem 1.5rem;background:rgba(255,255,255,0.95);border:2px solid var(--border-soft);border-radius:var(--radius);color:var(--text-primary);font-size:1rem;font-weight:600;cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-colored);backdrop-filter:blur(10px);font-family:inherit}.zoom-reset-btn:hover{background:rgba(255,182,193,0.1);border-color:var(--accent-color);transform:translateY(-2px);box-shadow:var(--shadow-lg)}.zoom-reset-btn:active{transform:translateY(0)}.zoom-reset-btn i{font-size:1.1rem;color:var(--primary-color)}
.zoom-notification{position:fixed;top:2rem;right:2rem;z-index:var(--z-notification);padding:1.2rem 2rem;background:rgba(25,183,143,0.95);color:#fff;border-radius:var(--radius);font-weight:600;font-size:1rem;box-shadow:var(--shadow-colored);backdrop-filter:blur(10px);transform:translateX(110%);opacity:0;transition:transform .4s cubic-bezier(.4,0,.2,1),opacity .3s;border:2px solid rgba(255,255,255,0.3)}.zoom-notification.show{transform:translateX(0);opacity:1}.zoom-notification::before{content:'';position:absolute;left:-10px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;border-right:10px solid rgba(25,183,143,0.95)}
.map-container.loading{pointer-events:none}.map-container.loading::after{content:'';position:absolute;inset:0;background:rgba(255,255,255,0.8);display:flex;align-items:center;justify-content:center;z-index:calc(var(--z-overlay))}.map-container.loading::before{content:"";width:48px;height:48px;border-radius:50%;border:4px solid rgba(25,183,143,0.15);border-top-color:var(--primary-color);animation:spin 1s linear infinite;z-index:calc(var(--z-overlay)+1)}@keyframes spin{to{transform:rotate(360deg)}}
.zoom-overlay{position:absolute;inset:0;background:linear-gradient(135deg,rgba(25,183,143,0.9),rgba(187,219,243,0.9));display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:8;color:#fff;backdrop-filter:blur(8px);animation:zoomOverlayFadeIn .4s ease}.zoom-overlay i{font-size:3rem;margin-bottom:1rem;animation:zoomPulse 1s infinite alternate}.zoom-overlay p{font-size:1.1rem;font-weight:500;text-align:center;margin:0;opacity:.9}@keyframes zoomOverlayFadeIn{from{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}@keyframes zoomPulse{from{transform:scale(1);opacity:.8}to{transform:scale(1.1);opacity:1}}
/* high contrast and reduced motion */
@media (prefers-contrast:high){:root{--border-color:#000;--text-secondary:#000;--surface-secondary:#f0f0f0}.zoom-reset-btn{background:#fff;border:2px solid #000}.zoom-notification{background:#000;border:2px solid #fff}}
@media (prefers-reduced-motion:reduce){.loading-spinner i{animation:none}.placemark-card,.map-btn,.logo{transition:none}}
/* modal & legal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:none;justify-content:center;align-items:center;z-index:var(--z-modal);overflow:auto}.modal-overlay.show{display:flex}.modal-content{background:var(--surface-color);padding:2rem;width:90%;max-width:700px;border-radius:calc(var(--radius)*.8);position:relative;max-height:80vh;overflow-y:auto;box-shadow:var(--shadow-lg)}.modal-close{position:absolute;top:12px;right:12px;background:none;border:none;font-size:1.6rem;cursor:pointer}.legal-section{padding:2rem;background:#f9f9f9;text-align:center;border-top:1px solid #ddd}.legal-title{font-size:1.2rem;margin-bottom:1rem}.legal-links{display:flex;justify-content:center;gap:1.5rem;flex-wrap:wrap}.legal-link{display:flex;align-items:center;gap:.5rem;color:#0073e6;text-decoration:none;font-weight:bold;transition:color .2s}.legal-link:hover{color:#004080}
